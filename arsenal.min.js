// Arsenal 1.4.0
// https://github.com/DJ-NotYet/arsenal
// (c) 2014, DJ-NotYet <dj.notyet@gmail.com>
// Licensed under the Apache License, version 2.0
(function(t){var i="1.4.0",n={},e=t.Arsenal;n.version=i,n.inNode="object"==typeof process&&process.version&&"object"==typeof require&&"object"==typeof module&&require.main===module,n.node=n.inNode,"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?exports=module.exports=n:exports.Arsenal=n:(t.Arsenal=n,n.noConflict=function(){return t.Arsenal=e,n}),n.isBoolean=function(t){return"boolean"==typeof t},n.isNumber=function(t){return"number"==typeof t&&isFinite(t)},n.isString=function(t){return"string"==typeof t},n.isArray=function(t){return"object"==typeof t&&t instanceof Array},n.isDate=function(t){return"object"==typeof t&&t instanceof Date},n.isRegExp=function(t){return"object"==typeof t&&t instanceof RegExp},n.isFunction=function(t){return"function"==typeof t},n.isHash=function(t){return t&&"object"==typeof t&&t.constructor===Object.prototype.constructor},n.isObject=function(t){return t===Object(t)},n.isNull=function(t){return null===t},n.isUndefined=function(t){return"undefined"==typeof t},n.isDefined=function(t){return"undefined"!=typeof t},n.isNumericString=function(t){return/^-?[0-9]+[0-9\.]*$/.test(t)},n.getKeys=function(t){var i,n=[];for(i in t)n.push(i);return n},n.getValues=function(t){var i,n=[];for(i in t)n.push(t[i]);return n},n.extend=function(t,i,e){if(t instanceof Array&&i instanceof Array)for(var s=0;s<i.length;s++)e&&"object"==typeof t[s]&&"object"==typeof i[s]?n.extend(t[s],i[s],e):t[s]=i[s];else for(var o in i)e&&"object"==typeof t[o]&&"object"==typeof i[o]?n.extend(t[o],i[o],e):t[o]=i[o];return t},n.async=n.inNode?process.nextTick:function(t){setTimeout(t,0)},function(){!function(t){function i(){this._context={},this._conditions=[],this._callback=function(){},this._callbackContext={}}function n(i,n){t.isFunction(i)&&(this._callback=i),t.isObject(n)&&(this._callbackContext=n)}function e(t){var i=this._conditions,n=i.indexOf(t);-1===n&&this._conditions.push(t),this.inspector()}function s(t){var i=this._conditions,n=i.indexOf(t);-1!==n&&this._conditions.splice(n,1),this.inspector()}function o(t){return this._context[t]}function r(t,i){this._context[t]=i,this.inspector()}function h(i){t.isUndefined(i)?this._context={}:delete this._context[i],this.inspector()}function u(){for(var i=this._conditions,n=!0,e=0;e<i.length;e++)if(t.isString(i[e])?n=n&&!!this._context[i[e]]:t.isFunction(i[e])&&(n=n&&!!i[e].call(this._context)),!n)return;n&&this._callback.call(this._callbackContext)}return i.prototype.setCallback=n,i.prototype.addCondition=e,i.prototype.removeCondition=s,i.prototype.getContext=o,i.prototype.setContext=r,i.prototype.unsetContext=h,i.prototype.inspector=u,i.prototype.hook=n,i.prototype.watch=e,i.prototype.neglect=s,i.prototype.get=o,i.prototype.set=r,i.prototype.unset=h,t.Trigger=i,i}(this),function(t){function i(){this._worker=null,this._context=null,this._precision=6e4,this._threshold=0,this._queue=[],this._timestamp=0,this._count=0,this._handle=null}function n(t,i){this._worker=t,this._context=i}function e(){this._queue.push(Array.prototype.slice.call(arguments)),this.process()}function s(t){return t&&(this._precision=t>>>0),this._precision}function o(i){return t.isDefined(i)&&(this._threshold=i>>>0),this._threshold}function r(){var t=(new Date).getTime()/this._precision>>>0;if(this._timestamp<t)this._timestamp=t,this._count=0;else if(this._timestamp===t&&this._count>=this._threshold)return!1;return this._count++,!0}function h(){if(clearTimeout(this._handle),!t.isFunction(this._worker))throw new Error("Worker function is null");this.check()?(this._worker.apply(this._context,this._queue.shift()),this._queue.length>0&&t.async(this.process.bind(this))):this._handle=setTimeout(this.process.bind(this),this._precision)}return i.prototype.setupWorker=n,i.prototype.runWorker=e,i.prototype.setPrecision=s,i.prototype.setThreshold=o,i.prototype.check=r,i.prototype.process=h,i.prototype.setup=n,i.prototype.run=e,i.prototype.precision=s,i.prototype.threshold=o,t.Throttle=i,i}(this),function(t){function i(){this._functions=[],this._context={push:this.pushFunction.bind(this),pop:this.popFunction.bind(this),shift:this.shiftFunction.bind(this),unshift:this.unshiftFunction.bind(this),count:this.countFunctions.bind(this),next:this.next.bind(this)},this._index=0}function n(i){t.isArray(i)?Array.prototype.push.apply(this._functions,i):this._functions.push(i)}function e(){return this._functions.pop()}function s(){return this._functions.shift()}function o(i){t.isArray(i)?Array.prototype.unshift.apply(this._functions,i):this._functions.unshift(i)}function r(){return this._functions.length}function h(i){return t.isObject(i)&&(this._context=i,this._context.push=this.pushFunction.bind(this),this._context.pop=this.popFunction.bind(this),this._context.shift=this.shiftFunction.bind(this),this._context.unshift=this.unshiftFunction.bind(this),this._context.count=this.countFunctions.bind(this),this._context.next=this.next.bind(this)),this._context}function u(){var t=++this._index;if(t<this._functions.length){var i=this._functions[t];return i.apply(this._context,arguments)}}function c(){return this._index=-1,this.next.apply(this,arguments)}return i.prototype.pushFunction=n,i.prototype.popFunction=e,i.prototype.shiftFunction=s,i.prototype.unshiftFunction=o,i.prototype.countFunctions=r,i.prototype.setContext=h,i.prototype.next=u,i.prototype.run=c,i.prototype.push=n,i.prototype.pop=e,i.prototype.shift=s,i.prototype.unshift=o,i.prototype.count=r,i.prototype.context=h,t.Sequence=i,i}(this),function(t){function i(){this._grid=[[]],this._x=0,this._y=0,this._handler=function(i,n){t.isFunction(i)&&i(),t.isFunction(n)&&n()}}function n(){0!==arguments.length&&(this._grid[this._x]=this._grid[this._x].concat(Array.prototype.slice.call(arguments)))}function e(){this._grid[++this._x]=[],this.add.apply(this,arguments)}function s(){return this._grid[0].length}function o(i){t.isFunction(i)&&(this._handler=i)}function r(i){if(!this._grid[0])return void(0===this._grid.length&&this._handler(void 0,!1));if(!(this._y>0))if(t.isFunction(i)&&(this._handler=i),this._grid[0].length>0){if(t.isFunction(this._handler))for(var n=this._grid[0],e=0;e<n.length;e++)t.async(this._handler.bind(this,n[e],this.done.bind(this)))}else this.next()}function h(i){t.isNumber(i)&&i||(i=1),this._y+=i,this._y>=this._grid[0].length&&this.next()}function u(){this._x--,this._y=0,this._grid.shift(),t.async(this.runGrid.bind(this))}return i.prototype.addElements=n,i.prototype.pushElements=e,i.prototype.getCurrentProgress=s,i.prototype.setupHandler=o,i.prototype.runGrid=r,i.prototype.done=h,i.prototype.next=u,i.prototype.add=n,i.prototype.push=e,i.prototype.count=s,i.prototype.setup=o,i.prototype.run=r,t.Grid=i,i}(this),function(t){function i(i){function n(i,n,o,u){return t.isString(i)?t.isFunction(n)?void(s[i]=n):(r={name:i,args:t.isArray(n)?n:[],context:t.isHash(o)?o:h.context,callback:t.isFunction(u)?u:t.isFunction(o)?o:null,presented:t.isFunction(s[i]),nested:!1},new e(r)):s}function e(){if(this instanceof e)return o=e.bind(arguments[0]);var n;if(h.name=this.name,h.args=this.args,h.context=this.context,h.callback=this.callback,h.presented=this.presented,h.nested=this.nested,0===h.args.length&&(h.args=Array.prototype.slice.call(arguments)),!t.isFunction(s[h.name])){if(t.isFunction(i))return i(new ReferenceError("No such function: "+h.name),h);throw new Error("No such function: "+h.name)}if(n=s[h.name].apply(h.context,h.args),n===o&&(r.nested=!0,!t.isFunction(r.callback)&&t.isFunction(h.callback)&&(r.callback=h.callback),n=new e(r)),t.isFunction(n)){if(!t.inNode)return n();t.async(n)}else if(t.isDefined(n))return t.isFunction(h.callback)&&h.callback(n),t.isFunction(i)&&i(null,h,n),n}var s={},o=null,r=null,h={name:"",args:[],context:{},callback:null,presented:!1,nested:!1};return n.bind({})}return t.Functional=i,i}(this),function(t){function i(){this._listeners={},this._contexts={},this._removals=[],this._max=10,this.DISPATCH_NEXT=!0,this.DISPATCH_STOP=!1}function n(t){return this._listeners[t]}function e(i,n,e){if(!t.isFunction(n))return!1;var s=this._listeners[i];if(s&&this._max>0&&s.length>=this._max)return!1;if(t.isArray(s)){var o=s.indexOf(n);-1===o&&(this._listeners[i].push(n),this._contexts[i].push(e))}else this._listeners[i]=[n],this._contexts[i]=[e];return!0}function s(t,i,n){return this.addListener(t,i,n)?(this._removals.push(i),!0):!1}function o(i,n){var e,s=this._listeners[i];if(t.isUndefined(n))if(i){delete this._listeners[i],delete this._contexts[i];for(var o=0;o<s.length;o++)e=this._removals.indexOf(s[o]),-1!==e&&this._removals.splice(e,1)}else this._listeners={},this._contexts={},this._removals=[];else t.isArray(s)&&(e=s.indexOf(n),-1!==e&&(this._listeners[i].splice(e,1),this._contexts[i].splice(e,1)),e=this._removals.indexOf(n),-1!==e&&this._removals.splice(e,1))}function r(i){var n=this._listeners[i],e=Array.prototype.slice.call(arguments);t.isArray(n)&&n.some(function(t,n){var s=this._contexts[i][n];return t&&-1!==this._removals.indexOf(t)&&this.removeListener(i,t),t.apply(s,e.slice(1))===this.DISPATCH_STOP?!0:!1},this)}function h(i){var n=this._listeners[i],e=Array.prototype.slice.call(arguments);t.isArray(n)&&n.forEach(function(n,s){var o=this._contexts[i][s];t.async(function(){n.apply(o,e.slice(1))})},this)}function u(i){t.isNumber(i)&&i>=0&&(this._max=i)}return i.prototype.getListeners=n,i.prototype.addListener=e,i.prototype.addListenerOnce=s,i.prototype.removeListener=o,i.prototype.removeAllListeners=o,i.prototype.dispatchSync=r,i.prototype.dispatchAsync=h,i.prototype.setMaxListeners=u,i.prototype.listeners=n,i.prototype.on=e,i.prototype.once=s,i.prototype.off=o,i.prototype.dispatch=r,i.prototype.emit=r,i.prototype.emitAsync=h,i.prototype.limit=u,t.Event=i,i}(this),function(t){function i(t){this._data={},this._bindings={},t&&this.updateSource(null,t)}function n(i,n){i||(i=""),t.isArray(this._bindings[i])?this._bindings[i].push(n):this._bindings[i]=[n]}function e(i,n){if(i||(i=""),t.isArray(this._bindings[i])){var e=this._bindings[i].indexOf(n);-1!==e&&this._bindings[i].splice(e,1)}}function s(i){if(i||(i=""),t.isDefined(i))delete this._bindings[i];else for(var n in this._bindings)delete this._bindings[n]}function o(i){if(i&&t.isString(i)){for(var n,e,s,o,r,h=/[^\.\[\]]+/g;null!==(n=h.exec(i));)if(e=n.index,s=n[0],o=r||this._data,r=o[s],t.isUndefined(r))return void 0;return r}return this._data}function r(i,n,e){if(i&&t.isString(i)){var s,o,r,h,u,c,p,a,l,f,d,y=/[^\.\[\]]+/g,_=".",g="[",x="]",b="*",m=null,v=[],F=[],A=[];for(v.unshift(["",this._data,""]);null!==(m=y.exec(i));){if(s=m.index,r=o,o=m[0],h=u||this._data,o===b){if(t.isArray(h))for(f=0;f<h.length;f++)this.updateSource(i.substr(0,s)+String(f)+i.substr(s+o.length),n,e);else if(t.isHash(h))for(f in h)this.updateSource(i.substr(0,s)+String(f)+i.substr(s+o.length),n,e);return h[o]}if(u=h[o],c=h[o],t.isHash(u)||t.isArray(u)||(h[o]=s<i.length-1&&i.charAt(s+o.length)===g?[]:{},u=h[o]),F=[],t.isArray(h)){var p=g+o+x,a=x;o=+o}else if(t.isHash(h))var p=_+o,a="";for(f=0;f<A.length;f++)A[f][0]+=p,v.push([A[f][0],u,A[f][1]]),F.push(v.length-1);A.push([i.substr(0,s)+b+a,o]),v.push([i.substr(0,s)+b+a,u,o]),v.push([i.substr(0,s)+o+a,u,o]),F.push(v.length-2),F.push(v.length-1)}for(t.isNumber(e)?t.isDefined(n)?e>=0?h[o][e]=n:h[o].splice(-e-1,0,n):h[o].splice(e,1):t.isNull(e)?t.isDefined(n)&&h[o].push(n):t.isString(e)?t.isDefined(n)?h[o][e]=n:delete h[o][e]:t.isArray(e)?t.isArray(h[o])?t.isNumber(e[0])?2===e.length?e[0]>=0?h[o][e[0]]=e[1]:h[o].splice(-e[0]-1,0,e[1]):1===e.length&&h[o].splice(e[0],1):t.isNull(e[0])&&h[o].push(e[1]):t.isObject(h[o])&&(2===e.length?h[o][e[0]]=e[1]:delete h[o][e[0]]):h[o]=t.isFunction(e)?e(h[o],n):n,f=0;f<F.length;f++)v[F[f]][1]=h[o];for(f=v.length-1;f>=0;f--)if(l=this._bindings[v[f][0]],t.isArray(l))for(d=0;d<l.length;d++)t.isFunction(l[d])?l[d].call(null,v[f][1],v[f][2],e,c,i):t.isArray(l[d])?l[d][0][l[d][1]]=v[f][1]:t.isString(l[d])&&this.updateSource(l[d],v[f][1]);return c}var c=this._data,l=this._bindings[""];if(this._data=n,t.isArray(l))for(var f=0;f<l.length;f++)t.isFunction(l[f])?l[f].call(null,n,"",e,c,i):t.isArray(l[f])?l[f][0][l[f][1]]=n:t.isString(l[f])&&this.updateSource(l[f],n);return c}return i.prototype.bindTarget=n,i.prototype.unbindTarget=e,i.prototype.clearBindings=s,i.prototype.getData=o,i.prototype.updateSource=r,i.prototype.bind=n,i.prototype.unbind=e,i.prototype.clear=s,i.prototype.get=o,i.prototype.update=r,t.Binding=i,i}(this)}.call(n)}).call({},this);